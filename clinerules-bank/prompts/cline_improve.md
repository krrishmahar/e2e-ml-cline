Improve the userâ€™s code.
Focus on:
- readability
- removing duplicates
- performance
- architectural cleanliness
Return updated code ONLY.

